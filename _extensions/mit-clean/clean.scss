/*-- scss:defaults --*/

// 1. MIT Color Palette
$mit-red: #750014;
$mit-gray: #8b959e;
$mit-black: #000000;
$mit-white: #ffffff;

// 2. Mapping MIT colors to Clean Theme Variables
$body-bg: $mit-white;
$body-color: $mit-black;

// Primary accent (Links, H3, bullets) -> MIT Red
$accent: $mit-red;
// Secondary accent (Alerts, H4) -> MIT Gray
$accent2: $mit-gray;

$link-color: $mit-red;
$selection-bg: rgba($mit-red, 0.3); // Highlighting text

// 3. Fonts
// We are disabling the Google Fonts import from 'clean' to use 
// the system fonts requested in your 'theme.scss' (Helvetica/Arial)

$font-family-sans-serif: "Helvetica Neue", Arial, sans-serif !default;
$presentation-heading-font: "Helvetica Neue", Arial, sans-serif !default;

$presentation-heading-color: $mit-red !default; // Headers are now MIT Red
$presentation-heading-font-weight: bold; // Adjusted to match standard academic styles
$presentation-font-size-root: 32px;

// Arrow for sub-lists
$right-arrow: "\2192";


/*-- scss:rules --*/

// --- MIT SPECIFIC UTILITIES ---

// 1. Bottom-right fixed MIT logo (Manual insertion)
.mit-logo {
    position: fixed;
    bottom: 20px;
    right: 30px;
    z-index: 30;
    pointer-events: none;

    /* 1. Define dimensions explicitly (needed for background images) */
    width: 100px;
    /* Adjust to match your SVG's aspect ratio */
    height: 40px;

    /* 2. Point to the image relative to THIS scss file */
    /* Quarto will resolve this path correctly regardless of installation method */
    background-image: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI3LjUuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCAxNjgwIDEwNDAiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDE2ODAgMTA0MCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxwYXRoIGZpbGw9IiM3NTAwMTQiIGQ9Ik04ODAsODc5LjI1MjA4aDE2MHYtNDgwSDg4MFY4NzkuMjUyMDh6IE0xMTIwLDMxOS4yNTIwOGg0MDB2LTE2MGgtNDAwVjMxOS4yNTIwOHogTTg4MCwxNTkuMjUyMTFoMTYwdjE2MAoJSDg4MFYxNTkuMjUyMTF6IE02NDAsODc5LjI1MjA4aDE2MHYtNzIwSDY0MFY4NzkuMjUyMDh6IE00MDAsNzE5LjI1MjA4aDE2MHYtNTYwSDQwMFY3MTkuMjUyMDh6IE0xNjAsODc5LjI1MjA4aDE2MHYtNzIwSDE2MAoJVjg3OS4yNTIwOHogTTExMjAsODc5LjI1MjA4aDE2MHYtNDgwaC0xNjBWODc5LjI1MjA4eiIvPgo8L3N2Zz4K");

    /* 3. Ensure it scales correctly */
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
}

// 2. Side Accent Borders
.reveal section {
    border-left: 6px solid transparent;
}

.reveal section.section-accent {
    border-left: 6px solid $mit-red;
}

// --- STANDARD CLEAN THEME RULES (Modified) ---

.reveal a {
    line-height: 1.5em;
}

.reveal p {
    font-weight: normal; // Reverted from 'lighter' for better readability with Arial
    margin-top: 1.25em;
}

// title and headings

#title-slide {
    text-align: left;

    .title {
        color: $presentation-heading-color;
        font-size: 1.6em;
        font-weight: bold;
    }

    .subtitle {
        color: $mit-gray; // Subtitle is accent gray
        font-style: italic;
        margin-top: 0em;
        font-weight: normal;
    }

    .institute,
    .quarto-title-affiliation,
    .quarto-title-author-email {
        font-style: italic;
        color: $mit-gray;
    }

    .author,
    .quarto-title-author-name {
        color: $body-color;
    }

    .quarto-title-authors {
        display: flex;
        justify-content: left;

        .quarto-title-author {
            padding-left: 0em;
            padding-right: 0em;
            width: 100%;
        }
    }
}

.reveal h1,
.reveal h2,
.reveal h3,
.reveal h4,
.reveal h5,
.reveal h6 {
    color: $mit-red;
    font-family: $presentation-heading-font;
}

.reveal h2 {
    font-weight: bold;
    font-size: 1.4em;
}

.reveal h3 {
    color: $mit-gray; // H3 is gray
    font-style: italic;
    font-weight: normal;
    font-size: 0.95em;
}

.reveal h4 {
    color: $mit-red;
    font-weight: normal;
    margin-top: 1.25em;
}

// alerts etc.

.alert {
    color: $mit-red;
    font-weight: bold;
}

.fg {
    color: var(--col, $body-color);
}

.bg {
    background-color: var(--col, #fff);
    padding: 0.1em;
    border-radius: 5px;
    display: inline-block;
}

// lists

.reveal ul {
    font-weight: normal;
    padding-left: 16px;

    li::marker {
        color: $mit-red;
    }
}

.reveal ul ul:not(.list-implies) {
    list-style: none;

    li:before {
        content: $right-arrow;
        color: $mit-gray;
        display: inline-block;
        width: 1em;
        margin-left: -1em;
        margin-right: 0.5em;
    }
}

.reveal ol {
    font-weight: normal;
    padding-left: 16px;

    li::marker {
        color: $mit-red;
    }
}

// Navigation Controls

.reveal .slide-menu-button {
    position: fixed;
    top: 6px;
    right: 0;
    display: flex;
    justify-content: flex-end;
    align-items: flex-start;
    pointer-events: none;
    color: $mit-gray;
}

.reveal .slide-menu-button>* {
    pointer-events: auto;
}

.reveal .slide-chalkboard-buttons {
    position: fixed;
    top: 12px;
    right: 24px;
    display: flex;
    justify-content: flex-end;
    align-items: flex-start;
    pointer-events: none;
    color: $mit-gray;
}

.reveal .slide-chalkboard-buttons>* {
    pointer-events: auto;
}

// --- LOGO AND SLIDE NUMBER POSITIONING ---

// Quarto Standard Logo override (if you use 'logo: mit.png' in yaml)
// We move this to bottom RIGHT to match your request.
.slide-logo {
    display: block !important;
    position: fixed !important;
    bottom: 20px !important;
    right: 30px !important;
    left: unset !important; // Unset the default left positioning
    max-width: 150px;
    max-height: 50px;
    width: auto !important;
    z-index: 30;
}

// Because the logo is now on the Right, we must move the Slide Number
// to the LEFT to avoid overlap.
.slide-number,
.reveal.has-logo .slide-number {
    bottom: 20px !important;
    left: 20px !important; // Moved to left
    right: unset !important;
    top: unset !important;
    color: $mit-gray !important;
}

// Buttons

.button {
    display: inline-block;
    padding: 6px 12px;
    margin-bottom: 0;
    font-size: 14px;
    font-weight: 400;
    line-height: 1.42857143;
    text-align: center;
    white-space: nowrap;
    vertical-align: middle;
    cursor: pointer;
    background-color: $mit-red;
    border: 1px solid $mit-red;
    color: #fff !important;
    text-decoration: none;
    border-radius: 4px;
    transition: all 0.2s ease-in-out;
}

.button:hover {
    background-color: darken($mit-red, 10%);
    border-color: darken($mit-red, 10%);
}

.button::before {
    content: "â–¶";
    margin-right: 5px;
}

// tables

.reveal table {
    margin: auto;
    border-collapse: collapse;
    border-spacing: 0;
    font-size: 0.8em;
}

.reveal table th,
.reveal table td {
    border: none;
    padding: .23em;
    text-align: left;
    font-weight: normal;
}

.reveal table thead th,
.reveal .slides table tr:last-child td,
.reveal .slides table {
    border-bottom: 2px solid $mit-gray;
}

.reveal table thead th {
    font-weight: bold;
    color: $mit-red;
}

.reveal table caption {
    color: $mit-gray;
    font-variant: small-caps;
}

// Helper classes for columns (unchanged)
.etable {
    width: 100%;
    height: calc(100% - 3em);
    display: flex;
    align-items: center;
    justify-content: center;
}

.etable img {
    max-width: 100%;
    max-height: 100%;
    width: auto;
    height: auto;
    object-fit: contain;
}

.reveal .columns3070>div.column:first-child {
    width: 30%;
}

.reveal .columns3070 div.column:not(:first-child) {
    width: 70%;
}

.reveal .columns7030>div.column:first-child {
    width: 70%;
}

.reveal .columns7030 div.column:not(:first-child) {
    width: 30%;
}

.reveal .columns4060>div.column:first-child {
    width: 40%;
}

.reveal .columns4060 div.column:not(:first-child) {
    width: 60%;
}

.reveal .columns6040>div.column:first-child {
    width: 60%;
}

.reveal .columns6040 div.column:not(:first-child) {
    width: 40%;
}

/* =========================
   TITLE SLIDE GLASS PANEL
   ========================= */

#title-slide.with-bg-box {
    text-align: center;

    /* Default glass settings */
    --glass-opacity: 0.25;
    --glass-blur: 12px;

    display: inline-block;
    padding: 2rem 3rem;
    border-radius: 28px;

    background: rgba(255, 255, 255, var(--glass-opacity));
    backdrop-filter: blur(var(--glass-blur));
    -webkit-backdrop-filter: blur(var(--glass-blur));

    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.35);
}


/* =========================
   GLASS OPACITY PRESETS
   ========================= */

/* Very subtle glass */
#title-slide.with-bg-box.light {
    --glass-opacity: 0.15;
}

/* Balanced glass (default feel) */
#title-slide.with-bg-box.medium {
    --glass-opacity: 0.30;
}

/* Strong / high-contrast glass */
#title-slide.with-bg-box.heavy {
    --glass-opacity: 0.55;
}


/* Optional large title mode */
#title-slide.large-title .title {
    font-size: 2.5em;
    font-weight: 700;
}

.list-implies {
    list-style-type: none; // Clear default bullets
    padding-left: 1.5em;

    li {
        position: relative;
    }

    // This targets the marker for both top-level and nested .list-implies
    li::marker {
        content: "\21D2 \00a0";
        color: $mit-red; // Force it to MIT Red
        font-size: 1.2em;
        font-family: "Cambria Math", "STIX General", serif;
    }

    // Ensure nested lists don't inherit the :before arrow from the general rule
    ul li:before {
        content: none !important;
    }
}

.reveal .tight {
    margin-top: -1.3em;
}
